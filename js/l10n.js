/**
 * Copyright (c) 2011-2013 Fabien Cazenave, Mozilla.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 */

document.webL10n=function(window,document,undefined){function consoleLog(e){gDEBUG>=2&&console.log("[l10n] "+e)}function consoleWarn(e){gDEBUG&&console.warn("[l10n] "+e)}function getL10nResourceLinks(){return document.querySelectorAll('link[type="application/l10n"]')}function getL10nDictionary(){var e=document.querySelector('script[type="application/l10n"]');return e?JSON.parse(e.innerHTML):null}function getTranslatableChildren(e){return e?e.querySelectorAll("*[data-l10n-id]"):[]}function getL10nAttributes(e){if(!e)return{};var t=e.getAttribute("data-l10n-id"),n=e.getAttribute("data-l10n-args"),r={};if(n)try{r=JSON.parse(n)}catch(i){consoleWarn("could not parse arguments for #"+t)}return{id:t,args:r}}function fireL10nReadyEvent(e){var t=document.createEvent("Event");t.initEvent("localized",!0,!1),t.language=e,document.dispatchEvent(t)}function xhrLoadText(e,t,n,r){t=t||function(t){},n=n||function(){consoleWarn(e+" not found.")};var i=new XMLHttpRequest;i.open("GET",e,r),i.overrideMimeType&&i.overrideMimeType("text/plain; charset=utf-8"),i.onreadystatechange=function(){i.readyState==4&&(i.status==200||i.status===0?t(i.responseText):n())},i.onerror=n,i.ontimeout=n;try{i.send(null)}catch(s){n()}}function parseResource(e,t,n,r){function s(e){return e.lastIndexOf("\\")<0?e:e.replace(/\\\\/g,"\\").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"	").replace(/\\b/g,"\b").replace(/\\f/g,"\f").replace(/\\{/g,"{").replace(/\\}/g,"}").replace(/\\"/g,'"').replace(/\\'/g,"'")}function o(e){function l(e,l){var h=e.replace(r,"").split(/[\r\n]+/),p="*",d=t.replace(/-[a-z]+$/i,""),v=!1,m="";for(var g=0;g<h.length;g++){var y=h[g];if(o.test(y))continue;if(l){if(u.test(y)){m=u.exec(y),p=m[1],v=p!=="*"&&p!==t&&p!==d;continue}if(v)continue;a.test(y)&&(m=a.exec(y),c(i+m[1]))}var b=y.match(f);b&&b.length==3&&(n[b[1]]=s(b[2]))}}function c(e){xhrLoadText(e,function(e){l(e,!1)},null,!1)}var n=[],r=/^\s*|\s*$/,o=/^\s*#|^\s*$/,u=/^\s*\[(.*)\]\s*$/,a=/^\s*@import\s+url\((.*)\)\s*$/i,f=/^([^=\s]*)\s*=\s*(.+)$/;return l(e,!0),n}var i=e.replace(/[^\/]*$/,"")||"./";xhrLoadText(e,function(e){gTextData+=e;var t=o(e);for(var r in t){var i,s,u=r.lastIndexOf(".");u>0?(i=r.substring(0,u),s=r.substr(u+1)):(i=r,s=gTextProp),gL10nData[i]||(gL10nData[i]={}),gL10nData[i][s]=t[r]}n&&n()},r,gAsyncResourceLoading)}function loadLocale(e,t){function u(e){var t=e.href,n=e.type;this.load=function(e,n){var r=e;return parseResource(t,e,n,function(){consoleWarn(t+" not found."),r=""}),r}}t=t||function(){},clear(),gLanguage=e;var n=getL10nResourceLinks(),r=n.length;if(r==0){var i=getL10nDictionary();i&&i.locales&&i.default_locale?(consoleLog("using the embedded JSON directory, early way out"),gL10nData=i.locales[e]||i.locales[i.default_locale],t()):consoleLog("no resource to load, early way out"),fireL10nReadyEvent(e),gReadyState="complete";return}var s=null,o=0;s=function(){o++,o>=r&&(t(),fireL10nReadyEvent(e),gReadyState="complete")};for(var a=0;a<r;a++){var f=new u(n[a]),l=f.load(e,s);l!=e&&(consoleWarn('"'+e+'" resource not found'),gLanguage="")}}function clear(){gL10nData={},gTextData="",gLanguage=""}function getPluralRules(e){function n(e,t){return t.indexOf(e)!==-1}function r(e,t,n){return t<=e&&e<=n}var t={af:3,ak:4,am:4,ar:1,asa:3,az:0,be:11,bem:3,bez:3,bg:3,bh:4,bm:0,bn:3,bo:0,br:20,brx:3,bs:11,ca:3,cgg:3,chr:3,cs:12,cy:17,da:3,de:3,dv:3,dz:0,ee:3,el:3,en:3,eo:3,es:3,et:3,eu:3,fa:0,ff:5,fi:3,fil:4,fo:3,fr:5,fur:3,fy:3,ga:8,gd:24,gl:3,gsw:3,gu:3,guw:4,gv:23,ha:3,haw:3,he:2,hi:4,hr:11,hu:0,id:0,ig:0,ii:0,is:3,it:3,iu:7,ja:0,jmc:3,jv:0,ka:0,kab:5,kaj:3,kcg:3,kde:0,kea:0,kk:3,kl:3,km:0,kn:0,ko:0,ksb:3,ksh:21,ku:3,kw:7,lag:18,lb:3,lg:3,ln:4,lo:0,lt:10,lv:6,mas:3,mg:4,mk:16,ml:3,mn:3,mo:9,mr:3,ms:0,mt:15,my:0,nah:3,naq:7,nb:3,nd:3,ne:3,nl:3,nn:3,no:3,nr:3,nso:4,ny:3,nyn:3,om:3,or:3,pa:3,pap:3,pl:13,ps:3,pt:3,rm:3,ro:9,rof:3,ru:11,rwk:3,sah:0,saq:3,se:7,seh:3,ses:0,sg:0,sh:11,shi:19,sk:12,sl:14,sma:7,smi:7,smj:7,smn:7,sms:7,sn:3,so:3,sq:3,sr:11,ss:3,ssy:3,st:3,sv:3,sw:3,syr:3,ta:3,te:3,teo:3,th:0,ti:4,tig:3,tk:3,tl:4,tn:3,to:0,tr:0,ts:3,tzm:22,uk:11,ur:3,ve:3,vi:0,vun:3,wa:4,wae:3,wo:0,xh:3,xog:3,yo:0,zh:0,zu:3},i={0:function(e){return"other"},1:function(e){return r(e%100,3,10)?"few":e===0?"zero":r(e%100,11,99)?"many":e==2?"two":e==1?"one":"other"},2:function(e){return e!==0&&e%10===0?"many":e==2?"two":e==1?"one":"other"},3:function(e){return e==1?"one":"other"},4:function(e){return r(e,0,1)?"one":"other"},5:function(e){return r(e,0,2)&&e!=2?"one":"other"},6:function(e){return e===0?"zero":e%10==1&&e%100!=11?"one":"other"},7:function(e){return e==2?"two":e==1?"one":"other"},8:function(e){return r(e,3,6)?"few":r(e,7,10)?"many":e==2?"two":e==1?"one":"other"},9:function(e){return e===0||e!=1&&r(e%100,1,19)?"few":e==1?"one":"other"},10:function(e){return r(e%10,2,9)&&!r(e%100,11,19)?"few":e%10==1&&!r(e%100,11,19)?"one":"other"},11:function(e){return r(e%10,2,4)&&!r(e%100,12,14)?"few":e%10===0||r(e%10,5,9)||r(e%100,11,14)?"many":e%10==1&&e%100!=11?"one":"other"},12:function(e){return r(e,2,4)?"few":e==1?"one":"other"},13:function(e){return r(e%10,2,4)&&!r(e%100,12,14)?"few":e!=1&&r(e%10,0,1)||r(e%10,5,9)||r(e%100,12,14)?"many":e==1?"one":"other"},14:function(e){return r(e%100,3,4)?"few":e%100==2?"two":e%100==1?"one":"other"},15:function(e){return e===0||r(e%100,2,10)?"few":r(e%100,11,19)?"many":e==1?"one":"other"},16:function(e){return e%10==1&&e!=11?"one":"other"},17:function(e){return e==3?"few":e===0?"zero":e==6?"many":e==2?"two":e==1?"one":"other"},18:function(e){return e===0?"zero":r(e,0,2)&&e!==0&&e!=2?"one":"other"},19:function(e){return r(e,2,10)?"few":r(e,0,1)?"one":"other"},20:function(e){return(r(e%10,3,4)||e%10==9)&&!(r(e%100,10,19)||r(e%100,70,79)||r(e%100,90,99))?"few":e%1e6===0&&e!==0?"many":e%10==2&&!n(e%100,[12,72,92])?"two":e%10==1&&!n(e%100,[11,71,91])?"one":"other"},21:function(e){return e===0?"zero":e==1?"one":"other"},22:function(e){return r(e,0,1)||r(e,11,99)?"one":"other"},23:function(e){return r(e%10,1,2)||e%20===0?"one":"other"},24:function(e){return r(e,3,10)||r(e,13,19)?"few":n(e,[2,12])?"two":n(e,[1,11])?"one":"other"}},s=t[e.replace(/-.*$/,"")];return s in i?i[s]:(consoleWarn("plural form unknown for ["+e+"]"),function(){return"other"})}function getL10nData(e,t){var n=gL10nData[e];n||consoleWarn("#"+e+" missing for ["+gLanguage+"]");var r={};for(var i in n){var s=n[i];s=substIndexes(s,t,e,i),s=substArguments(s,t),r[i]=s}return r}function substIndexes(e,t,n,r){var i=/\{\[\s*([a-zA-Z]+)\(([a-zA-Z]+)\)\s*\]\}/,s=i.exec(e);if(!s||!s.length)return e;var o=s[1],u=s[2],a;t&&u in t?a=t[u]:u in gL10nData&&(a=gL10nData[u]);if(o in gMacros){var f=gMacros[o];e=f(e,a,n,r)}return e}function substArguments(e,t){var n=/\{\{\s*([a-zA-Z\.]+)\s*\}\}/,r=n.exec(e);while(r){if(!r||r.length<2)return e;var i=r[1],s="";if(i in t)s=t[i];else{if(!(i in gL10nData))return consoleWarn("could not find argument {{"+i+"}}"),e;s=gL10nData[i][gTextProp]}e=e.substring(0,r.index)+s+e.substr(r.index+r[0].length),r=n.exec(e)}return e}function translateElement(e){var t=getL10nAttributes(e);if(!t.id)return;var n=getL10nData(t.id,t.args);if(!n){consoleWarn("#"+t.id+" missing for ["+gLanguage+"]");return}if(n[gTextProp]){if(getChildElementCount(e)===0)e[gTextProp]=n[gTextProp];else{var r=e.childNodes,i=!1;for(var s=0,o=r.length;s<o;s++)r[s].nodeType===3&&/\S/.test(r[s].textContent)&&(i?r[s].nodeValue="":(r[s].nodeValue=n[gTextProp],i=!0));i||consoleWarn("unexpected error, could not translate element content")}delete n[gTextProp]}for(var u in n)e[u]=n[u]}function getChildElementCount(e){if(e.children)return e.children.length;if(typeof e.childElementCount!="undefined")return e.childElementCount;var t=0;for(var n=0;n<e.childNodes.length;n++)t+=e.nodeType===1?1:0;return t}function translateFragment(e){e=e||document.documentElement;var t=getTranslatableChildren(e),n=t.length;for(var r=0;r<n;r++)translateElement(t[r]);translateElement(e)}var gL10nData={},gTextData="",gTextProp="textContent",gLanguage="",gMacros={},gReadyState="loading",gAsyncResourceLoading=!0,gDEBUG=1;gMacros.plural=function(e,t,n,r){var i=parseFloat(t);if(isNaN(i))return e;if(r!=gTextProp)return e;gMacros._pluralRules||(gMacros._pluralRules=getPluralRules(gLanguage));var s="["+gMacros._pluralRules(i)+"]";return i===0&&n+"[zero]"in gL10nData?e=gL10nData[n+"[zero]"][r]:i==1&&n+"[one]"in gL10nData?e=gL10nData[n+"[one]"][r]:i==2&&n+"[two]"in gL10nData?e=gL10nData[n+"[two]"][r]:n+s in gL10nData?e=gL10nData[n+s][r]:n+"[other]"in gL10nData&&(e=gL10nData[n+"[other]"][r]),e};if(document.addEventListener)document.addEventListener("DOMContentLoaded",function(){var e=document.documentElement.lang||navigator.language;loadLocale(e,translateFragment)},!1);else if(window.attachEvent){window.console||(consoleLog=function(e){},consoleWarn=function(e){gDEBUG&&alert("[l10n] "+e)}),window.XMLHttpRequest||(xhrLoadText=function(e,t,n,r){t=t||function(t){},n=n||function(){consoleWarn(e+" not found.")};var i=new ActiveXObject("Microsoft.XMLHTTP");i.open("GET",e,r),i.onreadystatechange=function(){i.readyState==4&&(i.status==200?t(i.responseText):n())},i.send(null)}),window.JSON||(getL10nAttributes=function(element){if(!element)return{};var l10nId=element.getAttribute("data-l10n-id"),l10nArgs=element.getAttribute("data-l10n-args"),args={};if(l10nArgs)try{args=eval(l10nArgs)}catch(e){consoleWarn("could not parse arguments for #"+l10nId)}return{id:l10nId,args:args}}),document.querySelectorAll||(getTranslatableChildren=function(e){if(!e)return[];var t=e.getElementsByTagName("*"),n=[],r=t.length;for(var i=0;i<r;i++)t[i].getAttribute("data-l10n-id")&&n.push(t[i]);return n},getL10nResourceLinks=function(){var e=document.getElementsByTagName("link"),t=[],n=e.length;for(var r=0;r<n;r++)e[r].type=="application/l10n"&&t.push(e[r]);return t});if(!window.JSON||!document.querySelectorAll)getL10nDictionary=function(){var scripts=document.getElementsByName("script");for(var i=0;i<scripts.length;i++)if(scripts[i].type=="application/l10n")return eval(scripts[i].innerHTML);return null};document.createEventObject&&!document.createEvent&&(fireL10nReadyEvent=function(e){document.documentElement.localized=1}),window.attachEvent("onload",function(){gTextProp=document.body.textContent?"textContent":"innerText";var e=document.documentElement.lang||window.navigator.userLanguage;loadLocale(e,translateFragment)})}return{get:function(e,t,n){var r=getL10nData(e,t)||n;return r?gTextProp in r?r[gTextProp]:"":"{{"+e+"}}"},getData:function(){return gL10nData},getText:function(){return gTextData},getLanguage:function(){return gLanguage},setLanguage:function(e){loadLocale(e,translateFragment)},getDirection:function(){var e=["ar","he","fa","ps","ur"];return e.indexOf(gLanguage)>=0?"rtl":"ltr"},translate:translateFragment,getReadyState:function(){return gReadyState},ready:function(e){if(!e)return;gReadyState=="complete"||gReadyState=="interactive"?window.setTimeout(e):document.addEventListener?document.addEventListener("localized",e):document.attachEvent&&document.documentElement.attachEvent("onpropertychange",function(t){t.propertyName==="localized"&&e()})}}}(window,document);if(window._===undefined)var _=document.webL10n.get